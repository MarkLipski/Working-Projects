* C:\Users\Mark\Documents\Working-Projects\Monolithic DC-DC Synthesis\4Terminal\SPICE\4Term_Model_TB.asc
V§IN N001 0 {VIn}
V§Out OUT 0 {VOut}
XX1 0 N001 N001 OUT 4term_model params: T={T}, B={B}, RSW={1}, C={1n}, fSW={fSW}

* block symbol definitions
.subckt 4term_model B1 B2 T1 T2
R2 BP2 N002 {1/(C*F)}
B3 N002 BP1 V=(V(TP2) - V(TP1))
B4 BP1 BP2 I={B*C*F*(V(BP1) - V(BP2))}
R1 TP2 N001 {1/(C*F)}
B5 TP1 T1 V={A*(V(B1) - V(B2) + V(T2) - V(T1))/(2*(A+1))}
B7 N001 TP1 V=(V(BP2) - V(BP1))
B8 TP1 TP2 I={T*C*F*(V(TP1) - V(TP2))}
B6 T2 TP2 V={A*(V(B1) - V(B2) + V(T2) - V(T1))/(2*(A+1))}
B1 BP1 B1 V={-A*(V(B1) - V(B2) + V(T2) - V(T1))/(2*(A+1))}
B2 B2 BP2 V={-A*(V(B1) - V(B2) + V(T2) - V(T1))/(2*(A+1))}
.param C=1n F={FSW} RSW=1000 T=0 B=0
.param A={exp(-1/(C*FSW*RSW*(4+B+T)))}
.ends 4term_model

.param fSW=100Meg T=0.05 B=0 VIn=1 VOut=1.85 TSW={1/fSW}
.step param fSW 50Meg 250Meg 5Meg
.op
.backanno
.end
